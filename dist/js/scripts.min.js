const modal=function(){const t=$(".modal"),o=$(".modal-body"),e=$(".modal__button.previous-button"),n=$(".modal__button.next-button");let i;function s(){o.children().remove(),$(".modal__title").remove(),i=null}function a(t){const o=pokemonRepository.getIndex(i);let a;t.target===e[0]?a=pokemonRepository.getAll()[o-1]:t.target===n[0]&&(a=pokemonRepository.getAll()[o+1]),a&&(s(),pokemonRepository.showDetails(a))}return t.on("hidden.bs.modal",s),[e,n].forEach(function(t){t.click(a)}),{showModal:function(t){i=t,function(t){const o=pokemonRepository.getIndex(t);0===o?e.css("visibility","hidden"):o===pokemonRepository.getAll().length-1?n.css("visibility","hidden"):[e,n].forEach(function(t){t.attr("style")&&t.removeAttr("style")})}(t);const s=$("<h1></h1>");s.addClass("modal__title"),s.text(t.name);const a=$("<div></div>");a.addClass("modal__properties"),function(t){const o=$("<p></p>");o.addClass("modal-property"),o.text(`Height: ${t.height}`);const e=$("<ul></ul>");return e.addClass("modal-property"),t.types.forEach(function(t){const o=$("<li></li>");o.addClass("modal-property__type"),o.text(t),e.append(o)}),[o,e]}(t).forEach(function(t){a.append(t)});const r=$("<img>");r.addClass("modal__image"),r.attr("src",t.imageUrl),$(".modal-header").append(s),o.append(a),o.append(r)}}}(),pokemonRepository=function(t){let o=[];const e="https://pokeapi.co/api/v2/pokemon/?limit=150";function n(o){t&&t.showModal&&function(t){const o=t.detailsUrl;return fetch(o).then(function(t){return t.json()}).then(function(o){t.imageUrl=o.sprites.front_default,t.height=o.height,t.types=o.types.map(function(t){return t.type.name})}).catch(function(t){console.error(t)})}(o).then(function(){t.showModal(o)})}return{getAll:function(){return o},addListItem:function(t){const o=$(".pokemon-list"),e=$("<li></li>");e.addClass("group-list-item"),e.attr("role","listitem");const i=$("<button></button>");i.addClass("btn pokemon-list__item"),i.attr("id",t.name),i.attr("data-toggle","modal"),i.attr("data-target","#pokemon-modal"),i.text(t.name),o.append(e),e.append(i),function(t,o){t.on("click",function(){n(o)})}(i,t)},loadList:function(){return fetch(e).then(function(t){return t.json()}).then(function(t){t.results.forEach(function(t){!function(t){if("object"==typeof t){const e=["name","height","types","detailsUrl"],n=Object.keys(t).length,i=Object.keys(t).every(function(t){return e.includes(t)});n<=e.length&&i?o.push(t):console.log("The item you are trying to add has an invalid number and/or invalid types of keys.")}else console.log("The item you are trying to add is not of the required type (object).")}({name:t.name,detailsUrl:t.url})})}).catch(function(t){console.error(t)})},showDetails:n,getIndex:function(t){return o.indexOf(t)}}}(modal);pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(t){pokemonRepository.addListItem(t)})}),$("#search-form").submit(function(){const t=$("#search-term").val(),o=pokemonRepository.getAll().filter(function(o){return o.name.includes(t)});return $(".pokemon-list").empty(),o.forEach(function(t){pokemonRepository.addListItem(t)}),$(".pokemon-list__item").each(function(){$(this).mark(t)}),!1});
